<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Savory Delights</title>
    <link rel="icon" type="image/png" href="assets/resTabIcon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Inherit main page styles and dark mode */
        body {
            background-color: #dadadaff;
            color: #333;
            margin: 5px 10px 10px 10px;
        }

        body.dark-mode {
            background: #222;
            color: #eee;
        }

        /* Apply neumorphic design to admin elements */
        .admin-container {
            background: rgba(224, 224, 224, 0.85);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin: 20px auto;
            max-width: 1200px;
            box-shadow: 8px 8px 16px rgba(0, 0, 0, 0.1), -8px -8px 16px rgba(255, 255, 255, 0.8);
        }

        body.dark-mode .admin-container {
            background: rgba(51, 51, 51, 0.85);
            box-shadow: 8px 8px 16px rgba(0, 0, 0, 0.3), -8px -8px 16px rgba(60, 60, 60, 0.5);
        }

        .table-container {
            background: rgba(224, 224, 224, 0.7);
            border-radius: 12px;
            padding: 15px;
            box-shadow: inset 3px 3px 5px rgba(0, 0, 0, 0.1), inset -3px -3px 5px rgba(255, 255, 255, 0.8);
        }

        body.dark-mode .table-container {
            background: rgba(51, 51, 51, 0.7);
            box-shadow: inset 3px 3px 5px rgba(0, 0, 0, 0.3), inset -3px -3px 5px rgba(60, 60, 60, 0.5);
        }
    </style>
</head>

<body>
    <div class="admin-container">
        <div class="admin-header">
            <h1><i class="fas fa-lock"></i> Admin Panel - Savory Delights</h1>
            <button class="logout-btn" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>

        <div class="admin-nav">
            <button data-section="reservations" class="nav-btn active">
                <i class="fas fa-calendar-alt"></i> Reservations
            </button>
            <button data-section="orders" class="nav-btn">
                <i class="fas fa-shopping-bag"></i> Orders
            </button>
            <button data-section="contacts" class="nav-btn">
                <i class="fas fa-envelope"></i> Contact Messages
            </button>
            <button data-section="menu" class="nav-btn">
                <i class="fas fa-utensils"></i> Menu Management
            </button>
            <button data-section="specialOffers" class="nav-btn">
                <i class="fas fa-tag"></i> Special Offers
            </button>
            <button data-section="gallery" class="nav-btn">
                <i class="fas fa-images"></i> Gallery Management
            </button>
        </div>

        <div id="reservationsSection" class="admin-section active">
            <h2><i class="fas fa-calendar-alt"></i> Reservations</h2>
            <div class="table-container">
                <table id="reservationsTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Phone</th>
                            <th>Date</th>
                            <th>Time</th>
                            <th>Guests</th>
                            <th>Status</th>
                            <th>Created At</th>
                        </tr>
                    </thead>
                    <tbody id="reservationsBody">
                        <tr>
                            <td colspan="9" style="text-align: center;">Loading reservations...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="ordersSection" class="admin-section">
            <h2><i class="fas fa-shopping-bag"></i> Orders</h2>
            <div class="table-container">
                <table id="ordersTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Customer</th>
                            <th>Email</th>
                            <th>Items</th>
                            <th>Total</th>
                            <th>Status</th>
                            <th>Created At</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="ordersBody">
                        <tr>
                            <td colspan="8" style="text-align: center;">Loading orders...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="contactsSection" class="admin-section">
            <h2><i class="fas fa-envelope"></i> Contact Messages</h2>
            <div class="table-container">
                <table id="contactsTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Message</th>
                            <th>Created At</th>
                        </tr>
                    </thead>
                    <tbody id="contactsBody">
                        <tr>
                            <td colspan="5" style="text-align: center;">Loading contact messages...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="menuSection" class="admin-section">
            <h2><i class="fas fa-utensils"></i> Menu Management</h2>
            <button class="btn-add" id="addMenuItemBtn">
                <i class="fas fa-plus"></i> Add New Menu Item
            </button>
            <div class="table-container">
                <table id="menuTable">
                    <thead>
                        <tr>
                            <th>Image</th>
                            <th>Name</th>
                            <th>Description</th>
                            <th>Price</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="menuBody">
                        <tr>
                            <td colspan="5" style="text-align: center;">Loading menu items...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="specialOffersSection" class="admin-section">
            <h2><i class="fas fa-tag"></i> Special Offers Management</h2>
            <button class="btn-add" id="addSpecialOfferBtn">
                <i class="fas fa-plus"></i> Add New Special Offer
            </button>
            <div class="table-container">
                <table id="specialOffersTable">
                    <thead>
                        <tr>
                            <th>Item</th>
                            <th>Original Price</th>
                            <th>Discount Price</th>
                            <th>Description</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="specialOffersBody">
                        <tr>
                            <td colspan="6" style="text-align: center;">Loading special offers...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="gallerySection" class="admin-section">
            <h2><i class="fas fa-images"></i> Gallery Management</h2>

            <div class="admin-controls">
                <button class="btn-add" id="addGalleryImageBtn">
                    <i class="fas fa-plus"></i> Add New Image
                </button>
            </div>

            <!-- Upload Interface -->
            <div class="upload-interface"
                style="margin: 20px 0; padding: 20px; background: #f8f9fa; border-radius: 8px; border: 1px solid #ddd;">
                <h4 style="margin-bottom: 15px;"><i class="fas fa-upload"></i> Upload New Image</h4>

                <!-- Upload Method Selection -->
                <div class="upload-method-selector" style="margin-bottom: 20px;">
                    <button type="button" id="urlUploadBtn" class="upload-method-btn active">
                        <i class="fas fa-link"></i> Upload via URL
                    </button>
                    <button type="button" id="fileUploadBtn" class="upload-method-btn">
                        <i class="fas fa-upload"></i> Upload from Computer
                    </button>
                </div>

                <!-- URL Upload Form -->
                <div id="urlUploadForm" class="upload-form">
                    <div class="form-group">
                        <label for="imageUrl"><i class="fas fa-link"></i> Image URL</label>
                        <input type="url" id="imageUrl" placeholder="https://example.com/image.jpg" required>
                    </div>
                    <div class="form-group">
                        <label for="imageTitle"><i class="fas fa-heading"></i> Image Title</label>
                        <input type="text" id="imageTitle" placeholder="Enter image title">
                    </div>
                    <div class="form-group">
                        <label for="imageDescription"><i class="fas fa-align-left"></i> Description</label>
                        <textarea id="imageDescription" placeholder="Enter image description" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="imageCategory"><i class="fas fa-folder"></i> Category</label>
                        <select id="imageCategory">
                            <option value="restaurant">Restaurant</option>
                            <option value="food">Food</option>
                            <option value="ambiance">Ambiance</option>
                            <option value="events">Events</option>
                        </select>
                    </div>
                    <button type="button" id="saveUrlImage" class="btn-primary">
                        <i class="fas fa-save"></i> Save Image URL
                    </button>
                </div>

                <!-- File Upload Form -->
                <div id="fileUploadForm" class="upload-form" style="display: none;">
                    <div class="form-group">
                        <label for="imageFile"><i class="fas fa-file-image"></i> Select Image File</label>
                        <input type="file" id="imageFile" accept="image/*" required>
                        <small style="color: #666;">Supported formats: JPEG, PNG, GIF, WebP (Max: 5MB)</small>
                    </div>
                    <div class="form-group">
                        <label for="fileImageTitle"><i class="fas fa-heading"></i> Image Title</label>
                        <input type="text" id="fileImageTitle" placeholder="Enter image title">
                    </div>
                    <div class="form-group">
                        <label for="fileImageDescription"><i class="fas fa-align-left"></i> Description</label>
                        <textarea id="fileImageDescription" placeholder="Enter image description" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="fileImageCategory"><i class="fas fa-folder"></i> Category</label>
                        <select id="fileImageCategory">
                            <option value="restaurant">Restaurant</option>
                            <option value="food">Food</option>
                            <option value="ambiance">Ambiance</option>
                            <option value="events">Events</option>
                        </select>
                    </div>

                    <!-- Upload Progress -->
                    <div id="uploadProgress" style="display: none; margin: 15px 0;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span>Uploading...</span>
                            <span id="progressText">0%</span>
                        </div>
                        <progress value="0" max="100" style="width: 100%; height: 20px;"></progress>
                    </div>

                    <button type="button" id="uploadFileBtn" class="btn-primary">
                        <i class="fas fa-upload"></i> Upload Image
                    </button>
                </div>
            </div>

            <!-- Gallery Images Table -->
            <div class="table-container">
                <div class="table-header">
                    <h3><i class="fas fa-images"></i> Current Gallery Images</h3>
                </div>
                <table id="galleryTable" class="admin-table">
                    <thead>
                        <tr>
                            <th>Preview</th>
                            <th>Title</th>
                            <th>Description</th>
                            <th>Category</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="galleryBody">
                        <tr>
                            <td colspan="6" style="text-align: center; padding: 20px;">
                                <i class="fas fa-spinner fa-spin"></i> Loading gallery images...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Menu Item Modal -->
    <div class="modal" id="menuItemModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Add Menu Item</h3>
                <button class="modal-close" id="modalClose">&times;</button>
            </div>
            <form id="menuItemForm">
                <input type="hidden" id="menuItemId">
                <div class="form-group">
                    <label for="itemName">Name</label>
                    <input type="text" id="itemName" required>
                </div>
                <div class="form-group">
                    <label for="itemDescription">Description</label>
                    <textarea id="itemDescription" required></textarea>
                </div>
                <div class="form-group">
                    <label for="itemPrice">Price</label>
                    <input type="number" id="itemPrice" step="0.01" min="0" required>
                </div>
                <div class="form-group">
                    <label for="itemImage">Image URL</label>
                    <input type="url" id="itemImage" required>
                </div>
                <div class="form-group">
                    <label for="itemCategory">Category</label>
                    <select id="itemCategory" required>
                        <option value="main">Main Course</option>
                        <option value="appetizers">Appetizers</option>
                        <option value="desserts">Desserts</option>
                        <option value="beverages">Beverages</option>
                    </select>
                </div>
                <div class="form-group">
                    <button type="submit" class="card-btn">Save Menu Item</button>
                    <button type="button" id="cancelMenuItemBtn" class="card-btn"
                        style="margin-left: 10px; background: #6c757d;">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Special Offer Modal -->
    <div class="modal" id="specialOfferModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="specialOfferModalTitle">Add Special Offer</h3>
                <button class="modal-close" id="specialOfferModalClose">&times;</button>
            </div>
            <form id="specialOfferForm">
                <input type="hidden" id="specialOfferId">
                <div class="form-group">
                    <label for="offerMenuItem">Menu Item</label>
                    <select id="offerMenuItem" required>
                        <option value="">Select a menu item</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="originalPrice">Original Price</label>
                    <input type="number" id="originalPrice" step="0.01" min="0" required>
                </div>
                <div class="form-group">
                    <label for="discountPrice">Discount Price</label>
                    <input type="number" id="discountPrice" step="0.01" min="0" required>
                </div>
                <div class="form-group">
                    <label for="offerDescription">Description</label>
                    <textarea id="offerDescription"></textarea>
                </div>
                <div class="form-group">
                    <button type="submit" class="card-btn">Save Special Offer</button>
                    <button type="button" id="cancelSpecialOfferBtn" class="card-btn"
                        style="margin-left: 10px; background: #6c757d;">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script src="admin.js"></script>
    <script>
        // Check for saved dark mode preference
        document.addEventListener('DOMContentLoaded', function () {
            if (localStorage.getItem('darkMode') === 'true') {
                document.body.classList.add('dark-mode');
            }
        });
    </script>
</body>

</html>